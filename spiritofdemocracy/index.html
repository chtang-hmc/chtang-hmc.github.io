<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Spirit of Democracy</title>
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'><text y='14' font-size='14'>üó≥Ô∏è</text></svg>">
  <link rel="stylesheet" href="./styles.css">
</head>
<body>
  <header class="app-header">
    <h1>Spirit of Democracy</h1>
    <div style="flex:1"></div>
    <div id="countdown" class="countdown" aria-live="polite">03:00</div>
    <button id="settings-btn" title="Settings">
      <span style="font-size:1.3em;">‚öôÔ∏è</span>
    </button>
  </header>

  <main id="app">
    <div id="feed" class="feed"></div>
  </main>

  <div id="poll-modal" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="poll-title">
    <div class="modal-content">
      <h2 id="poll-title">Quick Question</h2>
      <p>Do you think items at the British Museum obtained during the colonial period should be returned to their original countries?</p>
      <form id="poll-form">
        <label class="radio"><input type="radio" name="answer" value="yes" required> Yes</label>
        <label class="radio"><input type="radio" name="answer" value="no"> No</label>
        <label class="radio"><input type="radio" name="answer" value="maybe"> Maybe</label>
        <div class="modal-actions">
          <button type="submit" class="btn primary">Submit</button>
        </div>
      </form>
    </div>
  </div>

  <script type="module" src="./scripts/firebase.js"></script>
  <script type="module" src="./scripts/router.js"></script>
  <script type="module" src="./scripts/api.js"></script>
  <script type="module" src="./scripts/timer.js"></script>
  <script type="module" src="./scripts/feed.js"></script>

  <!-- Floating new post button -->
  <button id="fab-new-post" title="New Post" style="position:fixed;bottom:32px;right:32px;z-index:20;border:none;background:#1d9bf0;color:#fff;width:62px;height:62px;border-radius:50%;box-shadow:0 2px 16px rgba(29,155,209,0.10);font-size:2em;line-height:1.2;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:.13s;">
    Ôºã
  </button>
  <!-- Modal for new post (hidden by default) -->
  <div id="modal-new-post" class="modal hidden" role="dialog" aria-modal="true">
    <div class="modal-content" style="max-width:520px;">
      <h2 style="margin-bottom:0;font-size:1.25em;color:#1d9bf0;font-weight:700;">New Post</h2>
      <form id="new-post-form">
        <label for="post-text" style="display:block;margin:.9em 0 .15em;font-weight:500;">What's happening?</label>
        <textarea id="post-text" rows="3" maxlength="420" required placeholder="Write your tweet‚Ä¶" style="width:100%;font-size:1.15em;border-radius:12px;padding:10px;border:1.5px solid #d0dbe6;resize:vertical;"></textarea>
        <div style="margin-top:10px;">
          <label style="font-size:.98em;font-weight:500;">Media:
            <input id="post-media" type="file" style="display:block;font-size:.97em;margin-top:4px;" accept="image/*,video/mp4,video/webm,image/gif">
          </label>
        </div>
        <div style="margin-top:8px;font-size:1em;">or
          <input id="post-media-url" type="text" placeholder="YouTube link (optional)" style="width:94%;margin-top:5px;font-size:.99em;border-radius:8px;border:1.5px solid #d0dbe6;padding:5px 8px;"> </div>
        <div id="post-media-preview" style="margin-top:8px;"></div>
        <div class="modal-actions" style="margin-top:18px;">
          <button type="button" id="cancel-new-post" class="btn">Cancel</button>
          <button type="submit" class="btn primary" style="min-width:88px;">Post</button>
        </div>
      </form>
    </div>
  </div>
  <!-- Floating admin post button (bottom left, show only on localhost by default) -->
  <button id="fab-admin-post" title="Admin Post" style="position:fixed;bottom:32px;left:32px;z-index:30;border:none;background:#109140;color:#fff;width:62px;height:62px;border-radius:50%;box-shadow:0 2px 16px rgba(16,145,64,0.13);font-size:2em;line-height:1.2;cursor:pointer;display:none;align-items:center;justify-content:center;transition:.13s;">
    ‚òº
  </button>
  <!-- Modal for admin post -->
  <div id="modal-admin-post" class="modal hidden" role="dialog" aria-modal="true">
    <div class="modal-content" style="max-width:540px;">
      <h2 style="margin-bottom:0;font-size:1.32em;color:#109140;font-weight:700;">Admin Presenter Post</h2>
      <form id="admin-post-form">
        <div style="display:flex;gap:8px;align-items:baseline;margin:8px 0 2px 0;">
          <input id="admin-post-author" type="text" required placeholder="Presenter username‚Ä¶" style="flex:1;border-radius:8px;border:1.5px solid #d0dbe6;font-size:1em;">
          <select id="admin-post-stance" style="border-radius:8px;border:1.5px solid #d0dbe6;font-size:.98em;padding:2px 8px;">
            <option value="pro">PRO</option>
            <option value="against">AGAINST</option>
            <option value="mixed">MIXED</option>
            <option value="neutral">NEUTRAL</option>
          </select>
        </div>
        <label for="admin-post-text" style="display:block;margin:.8em 0 .15em;font-weight:500;">What's happening?</label>
        <textarea id="admin-post-text" rows="3" maxlength="420" required placeholder="Write your post‚Ä¶" style="width:100%;font-size:1.10em;border-radius:12px;padding:10px;border:1.5px solid #d0dbe6;resize:vertical;"></textarea>
        <div style="margin-top:10px;">
          <label style="font-size:.99em;font-weight:500;">Media:
            <input id="admin-post-media" type="file" accept="image/*,video/mp4,video/webm,image/gif" style="display:block;">
          </label>
        </div>
        <div style="margin-top:8px;font-size:1em;">or
          <input id="admin-post-media-url" type="text" placeholder="YouTube link (optional)" style="width:94%;margin-top:5px;font-size:.99em;border-radius:8px;border:1.5px solid #d0dbe6;padding:5px 8px;"> </div>
        <div id="admin-post-media-preview" style="margin-top:8px;"></div>
        <div class="modal-actions" style="margin-top:18px;">
          <button type="button" id="cancel-admin-post" class="btn">Cancel</button>
          <button type="submit" class="btn primary" style="min-width:88px;">Post</button>
        </div>
      </form>
    </div>
  </div>
  <!-- Settings modal -->
  <div id="settings-modal" class="modal hidden" role="dialog" aria-modal="true">
    <div class="modal-content" style="max-width:400px;">
      <h2 style="margin-bottom:10px;font-size:1.1em;">Settings</h2>
      <label style="font-size:17px;font-weight:500;margin-top:10px;display:flex;align-items:center;gap:12px;">
        <input type="checkbox" id="toggle-timer" style="width:22px;height:22px;" checked> Timer enabled
      </label>
      <div class="modal-actions" style="margin-top:24px;justify-content:center;">
        <button type="button" id="settings-close" class="btn">Close</button>
      </div>
    </div>
  </div>
</body>
</html>


